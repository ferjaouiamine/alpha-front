{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\src\\\\Components\\\\SignIn.js\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { blue } from \"@material-ui/core/colors\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Link from \"@material-ui/core/Link\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Alert } from 'antd';\nimport Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../context/userContext\";\nimport main from \"../media/login.svg\";\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    maxWidth: \"90%\" // Fix IE 11 issue.\n\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  mainImg: {\n    maxWidth: \"80%\"\n  },\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    marginTop: \"10%\"\n  },\n  wrapper: {\n    margin: theme.spacing(1),\n    position: \"relative\"\n  },\n  buttonSuccess: {\n    backgroundColor: blue[500],\n    \"&:hover\": {\n      backgroundColor: blue[700]\n    }\n  },\n  fabProgress: {\n    color: blue[500],\n    position: \"absolute\",\n    top: -6,\n    left: -6,\n    zIndex: 1\n  },\n  buttonProgress: {\n    color: blue[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\nexport default function SignIn() {\n  const classes = useStyles();\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const {\n    userData,\n    setUserData\n  } = useContext(UserContext);\n  const [values, setValues] = useState({});\n  const history = useHistory();\n  useEffect(() => {\n    localStorage.clear();\n  }, []);\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      const loginUser = {\n        email,\n        password\n      };\n      const loginRes = await Axios.post(\"http://localhost:3001/api/login\", loginUser);\n      setUserData({\n        token: loginRes.data.token,\n        user: loginRes.data.user,\n        isAuth: true,\n        role: loginRes.data.user.role,\n        classe: loginRes.data.user.classe,\n        section: loginRes.data.user.section\n      });\n      localStorage.setItem(\"token\", loginRes.data.token);\n      let classeSection = loginRes.data.user.classe + loginRes.data.user.section;\n      localStorage.setItem(\"classeSection\", classeSection);\n      {\n        loginRes.data.user.role === \"0\" ? history.push(\"/gestioneleves\") : history.push(\"/courses\");\n      }\n    } catch (err) {\n      setLoading(false);\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  const onClose = e => {\n    setError(null);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 10,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, error && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      marginTop: 20,\n      maxWidth: 550\n    },\n    message: \"Formulaire invalide\",\n    description: error,\n    type: \"error\",\n    showIcon: true,\n    onClose: onClose,\n    closable: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: submit,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    onChange: e => setEmail(e.target.value),\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"email\",\n    name: \"email\",\n    autoComplete: \"email\",\n    autoFocus: true,\n    validators: ['required', 'isEmail'],\n    errorMessages: ['this field is required', 'email is not valid'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"mot de passe\",\n    type: \"password\",\n    id: \"password\",\n    autoComplete: \"current-password\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, \"Sign In\"), loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 24,\n    className: classes.buttonProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    href: \"signup\",\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, \"Vous n'avez pas de compte?\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 10,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: classes.mainImg,\n    src: main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/SignIn.js"],"names":["Button","CircularProgress","blue","Grid","Link","makeStyles","TextField","Alert","Axios","React","useContext","useEffect","useState","useHistory","UserContext","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","maxWidth","submit","mainImg","root","wrapper","position","buttonSuccess","fabProgress","color","top","left","zIndex","buttonProgress","marginLeft","SignIn","classes","email","setEmail","password","setPassword","error","setError","loading","setLoading","userData","setUserData","values","setValues","history","localStorage","clear","e","preventDefault","loginUser","loginRes","post","token","data","user","isAuth","role","classe","section","setItem","classeSection","push","err","response","msg","onClose","target","value"],"mappings":"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","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { blue } from \"@material-ui/core/colors\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { Alert } from 'antd';\r\nimport Axios from \"axios\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserContext from \"../context/userContext\";\r\nimport main from \"../media/login.svg\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    maxWidth: \"90%\", // Fix IE 11 issue.\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  mainImg: {\r\n    maxWidth: \"80%\",\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginTop: \"10%\",\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: \"relative\",\r\n  },\r\n  buttonSuccess: {\r\n    backgroundColor: blue[500],\r\n    \"&:hover\": {\r\n      backgroundColor: blue[700],\r\n    },\r\n  },\r\n  fabProgress: {\r\n    color: blue[500],\r\n    position: \"absolute\",\r\n    top: -6,\r\n    left: -6,\r\n    zIndex: 1,\r\n  },\r\n  buttonProgress: {\r\n    color: blue[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [error, setError] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const { userData, setUserData } = useContext(UserContext);\r\n  const [values, setValues] = useState({});\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    localStorage.clear();\r\n  }, []);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const loginUser = { email, password };\r\n      const loginRes = await Axios.post(\r\n        \"http://localhost:3001/api/login\",\r\n        loginUser\r\n      );\r\n      setUserData({\r\n        token: loginRes.data.token,\r\n        user: loginRes.data.user,\r\n        isAuth: true,\r\n        role: loginRes.data.user.role,\r\n        classe: loginRes.data.user.classe,\r\n        section: loginRes.data.user.section,\r\n      });\r\n\r\n      localStorage.setItem(\"token\", loginRes.data.token);\r\n      let classeSection =\r\n        loginRes.data.user.classe + loginRes.data.user.section;\r\n      localStorage.setItem(\"classeSection\", classeSection);\r\n\r\n      {\r\n        loginRes.data.user.role === \"0\"\r\n          ? history.push(\"/gestioneleves\")\r\n          : history.push(\"/courses\");\r\n      }\r\n    } catch (err) {\r\n      setLoading(false);\r\n      err.response.data.msg && setError(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n\r\n  const onClose = (e) => {\r\n    setError(null)\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid item container alignItems=\"center\" justify=\"center\">\r\n        <Grid item xs={10} sm={6}>\r\n          \r\n          {error && (\r\n             <Alert style={{marginTop:20 ,maxWidth:550}}\r\n             message=\"Formulaire invalide\"\r\n             description={error}\r\n             type=\"error\"\r\n             showIcon\r\n             onClose={onClose}\r\n             closable\r\n           />\r\n          )}\r\n          <form className={classes.form} onSubmit={submit} noValidate>\r\n            <TextField\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"email\"\r\n              label=\"email\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n              validators={['required', 'isEmail']}\r\n              errorMessages={['this field is required', 'email is not valid']}\r\n            />\r\n            {/*<FormControl\r\n            className={clsx(classes.margin, classes.textField)}\r\n            variant=\"filled\"\r\n          >\r\n             <InputLabel htmlFor=\"filled-adornment-password\">\r\n              Mot de passe\r\n              <FilledInput\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                autoComplete=\"current-password\"\r\n                id=\"filled-adornment-password\"\r\n                type={values.showPassword ? \"text\" : \"password\"}\r\n                value={values.password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={handleClickShowPassword}\r\n                      onMouseDown={handleMouseDownPassword}\r\n                      edge=\"end\"\r\n                    >\r\n                      {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </InputLabel>\r\n              </FormControl>*/}\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"mot de passe\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <div className={classes.wrapper}>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                disabled={loading}\r\n              >\r\n                Sign In\r\n              </Button>\r\n              {loading && (\r\n                <CircularProgress\r\n                  size={24}\r\n                  className={classes.buttonProgress}\r\n                />\r\n              )}\r\n            </div>\r\n            <Link href=\"signup\" variant=\"body2\">\r\n              {\"Vous n'avez pas de compte?\"}\r\n            </Link>\r\n          </form>\r\n        </Grid>\r\n        <Grid item xs={10} sm={6}>\r\n          <img className={classes.mainImg} src={main}/>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}