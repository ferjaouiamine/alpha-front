{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import Button from\"@material-ui/core/Button\";import CircularProgress from\"@material-ui/core/CircularProgress\";import{blue}from\"@material-ui/core/colors\";import FormControl from\"@material-ui/core/FormControl\";import Grid from\"@material-ui/core/Grid\";import InputLabel from\"@material-ui/core/InputLabel\";import Link from\"@material-ui/core/Link\";import Select from\"@material-ui/core/Select\";import{makeStyles}from\"@material-ui/core/styles\";import TextField from\"@material-ui/core/TextField\";import{Alert}from'antd';import\"antd/dist/antd.css\";import Axios from\"axios\";import\"date-fns\";import React,{useContext,useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import UserContext from\"../context/userContext\";import\"../css/errorNotice.css\";import\"../css/Signup.css\";import signup from\"../media/signup.svg\";/*\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright Â© \"}\r\n      <Link color=\"inherit\" href=\"https://www.smartify.tn/\">\r\n        Smartify\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n*/var useStyles=makeStyles(function(theme){var _ref;return _ref={paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},mainImg:{maxWidth:\"60%\"},form:{maxWidth:\"80%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)},formControl:{margin:theme.spacing(1),minWidth:120},selectEmpty:{marginTop:theme.spacing(2)}},_defineProperty(_ref,\"paper\",{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"}),_defineProperty(_ref,\"avatar\",{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main}),_defineProperty(_ref,\"form\",{maxWidth:\"90%\"// Fix IE 11 issue.\n}),_defineProperty(_ref,\"submit\",{margin:theme.spacing(3,0,2)}),_defineProperty(_ref,\"mainImg\",{maxWidth:\"90%\"}),_defineProperty(_ref,\"root\",{display:\"flex\",alignItems:\"center\",marginTop:\"10%\",marginBottom:\"10%\"}),_defineProperty(_ref,\"wrapper\",{margin:theme.spacing(1),position:\"relative\"}),_defineProperty(_ref,\"buttonSuccess\",{backgroundColor:blue[500],\"&:hover\":{backgroundColor:blue[700]}}),_defineProperty(_ref,\"fabProgress\",{color:blue[500],position:\"absolute\",top:-6,left:-6,zIndex:1}),_defineProperty(_ref,\"buttonProgress\",{color:blue[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}),_ref;});export default function SignUp(){var classes=useStyles();var _useState=useState(),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),lastName=_useState4[0],setLastName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),passwordCheck=_useState10[0],setPasswordCheck=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),birthdayDate=_useState12[0],setBirthdayDate=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),phone=_useState14[0],setPhone=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),highSchool=_useState16[0],setHightSchool=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),error=_useState18[0],setError=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),classe=_useState20[0],setClasse=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),loading=_useState22[0],setLoading=_useState22[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();useEffect(function(){localStorage.clear();},[]);var submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,registerRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.prev=2;newUser={firstName:firstName,lastName:lastName,email:email,birthdayDate:birthdayDate,phone:phone,highSchool:highSchool,classe:classe,password:password,passwordCheck:passwordCheck};console.log(newUser);_context.next=7;return Axios.post(\"/api/student/register\",newUser);case 7:registerRes=_context.sent;console.log(registerRes);history.push(\"/signin\");setUserData({userInfo:newUser});_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);setLoading(false);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var onClose=function onClose(e){setError(null);};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Grid,{item:true,container:true,alignItems:\"center\",justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:6},error&&/*#__PURE__*/React.createElement(Alert,{style:{marginTop:20,maxWidth:500,marginBottom:20},message:\"Formulaire invalide\",description:error,type:\"error\",showIcon:true,closable:true,onClose:onClose}),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,onSubmit:submit,noValidate:true},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{autoComplete:\"fname\",name:\"firstName\",variant:\"outlined\",required:true,fullWidth:true,id:\"firstName\",label:\"Nom\",autoFocus:true,onChange:function onChange(e){return setFirstName(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"lastName\",label:\"pr\\xE9nom\",name:\"lastName\",onChange:function onChange(e){return setLastName(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"email\",label:\"Email\",name:\"email\",autoComplete:\"email\"/* ref={register({\r\n                      required: true,\r\n                    })}*/,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"outlined-age-native-simple\"},\"Classe\"),/*#__PURE__*/React.createElement(Select,{native:true,onChange:function onChange(e){return setClasse(e.target.value);},label:\"Classe\",inputProps:{name:\"age\",id:\"outlined-age-native-simple\"}},/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"1 \\xE8re Secondaire\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\\xE9conomie\"},\"2 \\xE8me \\xE9conomie et serivce\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2Informatique\"},\"2 \\xE8me Informatique\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2Science Exp\"},\"2 \\xE8me Scientifique \"),/*#__PURE__*/React.createElement(\"option\",{value:\"3Informatique\"},\"3 \\xE8me Informatique\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3Math\\xE9matiques\"},\"3 \\xE8me Math\\xE9matiques\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3Science Exp\"},\"3 \\xE8me Science Exp\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3Techniques\"},\"3 \\xE8me Techniques\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4\\xE9conomie\"},\"Bac \\xE9conomie\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4Informatique\"},\"Bac Informatique\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4Lettre\"},\"Bac Lettre\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4math\\xE9matiques\"},\"Bac Math\\xE9matiques\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4Science Exp\"},\"Bac Science Exp\")))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"phone\",label:\" num\\xE9ro de t\\xE9l\\xE9phone\",name:\"phone\",autoComplete:\"phone\",onChange:function onChange(e){return setPhone(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"highSchool\",label:\"lyc\\xE9e\",name:\"highSchool\",autoComplete:\"highSchool\",onChange:function onChange(e){return setHightSchool(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,name:\"password\",label:\"mot de passe\",type:\"password\",id:\"password\",autoComplete:\"current-password\"/* ref={register({\r\n                      required: true,\r\n                      minLength: 6,\r\n                      maxLength: 20,\r\n                      pattern: /^[A-Za-z]+$/i,\r\n                    })}*/,onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,name:\"confirm_password\",label:\"confirmer le mot de passe\",type:\"password\",id:\"confirm_password\",autoComplete:\"current-password\"/* ref={register({\r\n                      required: true,\r\n                      minLength: 6,\r\n                      maxLength: 20,\r\n                      pattern: /^[A-Za-z]+$/i,\r\n                    })}*/,onChange:function onChange(e){return setPasswordCheck(e.target.value);}}))),/*#__PURE__*/React.createElement(\"div\",{className:classes.wrapper},/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,disabled:loading},\"Sign In\"),loading&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress})),/*#__PURE__*/React.createElement(Link,{href:\"/signin\",variant:\"body2\"},\"Vous avez d\\xE9j\\xE0 un compte? se connecter\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:6},/*#__PURE__*/React.createElement(\"img\",{className:classes.mainImg,src:signup}))));}","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/SignUp.js"],"names":["Button","CircularProgress","blue","FormControl","Grid","InputLabel","Link","Select","makeStyles","TextField","Alert","Axios","React","useContext","useEffect","useState","useHistory","UserContext","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","mainImg","maxWidth","form","submit","formControl","minWidth","selectEmpty","marginBottom","position","color","top","left","zIndex","marginLeft","SignUp","classes","firstName","setFirstName","lastName","setLastName","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","birthdayDate","setBirthdayDate","phone","setPhone","highSchool","setHightSchool","error","setError","classe","setClasse","loading","setLoading","setUserData","history","localStorage","clear","e","preventDefault","newUser","console","log","post","registerRes","push","userInfo","response","data","msg","onClose","root","target","value","name","id","wrapper","buttonProgress","signup"],"mappings":"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","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { blue } from \"@material-ui/core/colors\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { Alert } from 'antd';\r\nimport \"antd/dist/antd.css\";\r\nimport Axios from \"axios\";\r\nimport \"date-fns\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserContext from \"../context/userContext\";\r\nimport \"../css/errorNotice.css\";\r\nimport \"../css/Signup.css\";\r\nimport signup from \"../media/signup.svg\";\r\n/*\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright Â© \"}\r\n      <Link color=\"inherit\" href=\"https://www.smartify.tn/\">\r\n        Smartify\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n*/\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  mainImg: {\r\n    maxWidth: \"60%\",\r\n  },\r\n  form: {\r\n    maxWidth: \"80%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    maxWidth: \"90%\", // Fix IE 11 issue.\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  mainImg: {\r\n    maxWidth: \"90%\",\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginTop: \"10%\",\r\n    marginBottom : \"10%\"\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: \"relative\",\r\n  },\r\n  buttonSuccess: {\r\n    backgroundColor: blue[500],\r\n    \"&:hover\": {\r\n      backgroundColor: blue[700],\r\n    },\r\n  },\r\n  fabProgress: {\r\n    color: blue[500],\r\n    position: \"absolute\",\r\n    top: -6,\r\n    left: -6,\r\n    zIndex: 1,\r\n  },\r\n  buttonProgress: {\r\n    color: blue[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nexport default function SignUp() {\r\n  const classes = useStyles();\r\n  const [firstName, setFirstName] = useState();\r\n  const [lastName, setLastName] = useState();\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [passwordCheck, setPasswordCheck] = useState();\r\n  const [birthdayDate, setBirthdayDate] = useState();\r\n  const [phone, setPhone] = useState();\r\n  const [highSchool, setHightSchool] = useState();\r\n  const [error, setError] = useState();\r\n  const [classe, setClasse] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { setUserData } = useContext(UserContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    localStorage.clear();\r\n  }, []);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const newUser = {\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        birthdayDate,\r\n        phone,\r\n        highSchool,\r\n        classe,\r\n        password,\r\n        passwordCheck,\r\n      };\r\n      console.log(newUser);\r\n      const registerRes = await Axios.post(\r\n        \"/api/student/register\",\r\n        newUser\r\n      );\r\n      console.log(registerRes);\r\n      history.push(\"/signin\");\r\n      setUserData({ userInfo: newUser });\r\n    } catch (err) {\r\n      setLoading(false);\r\n      err.response.data.msg && setError(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  \r\n  const onClose = (e) => {\r\n    setError(null)\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid item container alignItems=\"center\" justify=\"center\">\r\n        <Grid item xs={10} sm={6}>\r\n          {/*<Avatar className={classes.avatar}>\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Sign up\r\n  </Typography>*/}\r\n          {error && ( \r\n              <Alert style={{marginTop:20 ,maxWidth:500,marginBottom : 20}}\r\n             message=\"Formulaire invalide\"\r\n             description={error}\r\n             type=\"error\"\r\n             showIcon             \r\n             closable\r\n             onClose={onClose}\r\n           />\r\n            \r\n          )}\r\n          <form className={classes.form} onSubmit={submit} noValidate>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  autoComplete=\"fname\"\r\n                  name=\"firstName\"\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"firstName\"\r\n                  label=\"Nom\"\r\n                  autoFocus\r\n                  onChange={(e) => setFirstName(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"lastName\"\r\n                  label=\"prÃ©nom\"\r\n                  name=\"lastName\"\r\n                  onChange={(e) => setLastName(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"email\"\r\n                  label=\"Email\"\r\n                  name=\"email\"\r\n                  autoComplete=\"email\"\r\n                  /* ref={register({\r\n                      required: true,\r\n                    })}*/\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                  <InputLabel htmlFor=\"outlined-age-native-simple\">\r\n                    Classe\r\n                  </InputLabel>\r\n                  <Select\r\n                    native\r\n                    onChange={(e) => setClasse(e.target.value)}\r\n                    label=\"Classe\"\r\n                    inputProps={{\r\n                      name: \"age\",\r\n                      id: \"outlined-age-native-simple\",\r\n                    }}\r\n                  >\r\n                    <option value=\"1\">1 Ã¨re Secondaire</option>\r\n                    <option value=\"2Ã©conomie\">2 Ã¨me Ã©conomie et serivce</option>\r\n                    <option value=\"2Informatique\">2 Ã¨me Informatique</option>\r\n                    <option value=\"2Science Exp\">2 Ã¨me Scientifique </option>\r\n                    <option value=\"3Informatique\">3 Ã¨me Informatique</option>\r\n                    <option value=\"3MathÃ©matiques\">3 Ã¨me MathÃ©matiques</option>\r\n                    <option value=\"3Science Exp\">3 Ã¨me Science Exp</option>\r\n                    <option value=\"3Techniques\">3 Ã¨me Techniques</option>\r\n                    <option value=\"4Ã©conomie\">Bac Ã©conomie</option>\r\n                    <option value=\"4Informatique\">Bac Informatique</option>\r\n                    <option value=\"4Lettre\">Bac Lettre</option>\r\n                    <option value=\"4mathÃ©matiques\">Bac MathÃ©matiques</option>\r\n                    <option value=\"4Science Exp\">Bac Science Exp</option>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n{/*  \r\n                <label>date de naissance :   </label>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  id=\"date\"\r\n                  \r\n                  type=\"date\"\r\n                  \r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                  onChange={(e) => setBirthdayDate(e.target.value)}\r\n                />\r\n              </Grid>\r\n                */}\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"phone\"\r\n                  label=\" numÃ©ro de tÃ©lÃ©phone\"\r\n                  name=\"phone\"\r\n                  autoComplete=\"phone\"\r\n                  onChange={(e) => setPhone(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"highSchool\"\r\n                  label=\"lycÃ©e\"\r\n                  name=\"highSchool\"\r\n                  autoComplete=\"highSchool\"\r\n                  onChange={(e) => setHightSchool(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"mot de passe\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  /* ref={register({\r\n                      required: true,\r\n                      minLength: 6,\r\n                      maxLength: 20,\r\n                      pattern: /^[A-Za-z]+$/i,\r\n                    })}*/\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"confirm_password\"\r\n                  label=\"confirmer le mot de passe\"\r\n                  type=\"password\"\r\n                  id=\"confirm_password\"\r\n                  autoComplete=\"current-password\"\r\n                  /* ref={register({\r\n                      required: true,\r\n                      minLength: 6,\r\n                      maxLength: 20,\r\n                      pattern: /^[A-Za-z]+$/i,\r\n                    })}*/\r\n                  onChange={(e) => setPasswordCheck(e.target.value)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <div className={classes.wrapper}>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                disabled={loading}\r\n              >\r\n                Sign In\r\n              </Button>\r\n              {loading && (\r\n                <CircularProgress\r\n                  size={24}\r\n                  className={classes.buttonProgress}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <Link href=\"/signin\" variant=\"body2\">\r\n              Vous avez dÃ©jÃ  un compte? se connecter\r\n            </Link>\r\n          </form>\r\n        </Grid>\r\n        <Grid item xs={10} sm={6}>\r\n          <img className={classes.mainImg} src={signup}></img>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}