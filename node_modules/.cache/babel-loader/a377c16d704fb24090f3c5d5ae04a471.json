{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{UploadOutlined}from\"@ant-design/icons\";import{Alert,Button,Form,Input,message,Select,Upload}from\"antd\";import axios from\"axios\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import\"../css/userDataTable.css\";var Option=Select.Option;var AddCourse=function AddCourse(){axios.create({baseURL:\"/api/\"});var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var pdfUrl,videoUrl,newCourse,_course;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();pdfUrl=_toConsumableArray(new Set(pdf));videoUrl=_toConsumableArray(new Set(video));_context.prev=3;newCourse={courseName:courseName,chapterName:chapterName,description:description,section:section,classe:classe,pdfUrl:pdfUrl,svgUrl:svgUrl,videoUrl:videoUrl};if(!(description===undefined||courseName===undefined||chapterName===undefined||classe===undefined)){_context.next=7;break;}return _context.abrupt(\"return\",setInvalidForm(true));case 7:console.log(newCourse);_context.next=10;return axios.post(\"/api/course\",newCourse);case 10:_course=_context.sent;console.log(_course);setCourse(_course);setPdf([]);setVideo([]);history.push(\"/gestioncours\");_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);message.error(_context.t0.response.data.msg);case 22:case\"end\":return _context.stop();}}},_callee,null,[[3,18]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();var TextArea=Input.TextArea;var _useState=useState([]),_useState2=_slicedToArray(_useState,1),data=_useState2[0];//table data\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),invalidForm=_useState6[0],setInvalidForm=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),course=_useState8[0],setCourse=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),courseName=_useState10[0],setCourseName=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),chapterName=_useState12[0],setChapterName=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),section=_useState16[0],setSection=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),classe=_useState18[0],setClasse=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),pdf=_useState20[0],setPdf=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),video=_useState22[0],setVideo=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),fileList=_useState24[0],updateFileList=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),svgUrl=_useState26[0],setSvgUrl=_useState26[1];var addFiles={name:\"file\",multiple:true,action:\"/api/upload/uploadFile\",beforeUpload:function beforeUpload(file){if(file.type!==\"application/pdf\"&&file.type!==\"video/mp4\"){return message.error(\"\".concat(file.name,\" type de fichier non autoris\\xE9.\"));}return file.type;},onChange:function onChange(info){//file.status is empty when beforeUpload return false\nif(info.file.type===\"application/pdf\")setPdf(function(pdf){return[].concat(_toConsumableArray(pdf),[info.file.name.toLowerCase().split(\" \").join(\"-\")]);});// setPdf(info.file.name.toLowerCase().split(\" \").join(\"-\"));\nelse if(info.file.type===\"video/mp4\")setVideo(function(video){return[].concat(_toConsumableArray(video),[info.file.name.toLowerCase().split(\" \").join(\"-\")]);});updateFileList(info.fileList.filter(function(file){return!!file.status;}));}};var layout={labelCol:{span:4},wrapperCol:{span:14}};function handleChangeCourse(value){console.log(\"selected \".concat(value));setChapterName(value[0]);}function handleChangeClasse(value){console.log(\"selected \".concat(value));setClasse(value);}function handleChangeCourseName(value){console.log(\"selected \".concat(value));setCourseName(value);switch(value){case\"Physique\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/physique.svg\");break;case\"Chimie\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/chimie.svg\");break;case\"Base de donnée\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/bd.svg\");break;case\"algo\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/programmation.svg\");break;case\"arabe\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/arabe.svg\");break;case\"français\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/francais.svg\");break;case\"anglais\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/english.svg\");break;case\"math\":setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/maths.svg\");break;default:console.log(\"no svg\");}}var chapitres=[];data.map(function(chapitre){return chapitres.push(/*#__PURE__*/React.createElement(Option,{key:chapitre.chapterName},chapitre.chapterName));});var onClose=function onClose(e){setInvalidForm(false);};return/*#__PURE__*/React.createElement(\"div\",null,invalidForm&&/*#__PURE__*/React.createElement(Alert,{style:{marginTop:20},message:\"Formulaire invalide\",description:\"Veuillez remplir tous les champs.\",type:\"error\",showIcon:true,closable:true,onClose:onClose}),/*#__PURE__*/React.createElement(Form,Object.assign({},layout,{onSubmit:submit,noValidate:true,labelCol:{span:4},wrapperCol:{span:25},size:\"large\",layout:\"vertical\",style:{marginTop:100},initialValues:{remember:true}}),/*#__PURE__*/React.createElement(Form.Item,{label:\"Mati\\xE8re :\"},/*#__PURE__*/React.createElement(Select,{defaultValue:\"Mati\\xE8re\",onChange:handleChangeCourseName},/*#__PURE__*/React.createElement(Option,{value:\"Physique\"},\"Physique\"),/*#__PURE__*/React.createElement(Option,{value:\"Chimie\"},\"Chimie\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"Classe :\"},/*#__PURE__*/React.createElement(Select,{defaultValue:\"Classe\",onChange:handleChangeClasse},/*#__PURE__*/React.createElement(Option,{value:\"1\"},\"1 \\xE8re Secondaire\"),/*#__PURE__*/React.createElement(Option,{value:\"2\\xE9conomie\"},\"2 \\xE8me \\xE9conomie et serivce\"),/*#__PURE__*/React.createElement(Option,{value:\"2Informatique\"},\"2 \\xE8me Informatique\"),/*#__PURE__*/React.createElement(Option,{value:\"2Science Exp\"},\"2 \\xE8me Scientifique \"),/*#__PURE__*/React.createElement(Option,{value:\"3Informatique\"},\"3 \\xE8me Informatique\"),/*#__PURE__*/React.createElement(Option,{value:\"3Math\\xE9matiques\"},\"3 \\xE8me Math\\xE9matiques\"),/*#__PURE__*/React.createElement(Option,{value:\"3Science Exp\"},\"3 \\xE8me Science Exp\"),/*#__PURE__*/React.createElement(Option,{value:\"3Techniques\"},\"3 \\xE8me Techniques\"),/*#__PURE__*/React.createElement(Option,{value:\"4\\xE9conomie\"},\"Bac \\xE9conomie\"),/*#__PURE__*/React.createElement(Option,{value:\"4Informatique\"},\"Bac Informatique\"),/*#__PURE__*/React.createElement(Option,{value:\"4Lettre\"},\"Bac Lettre\"),/*#__PURE__*/React.createElement(Option,{value:\"4math\\xE9matiques\"},\"Bac Math\\xE9matiques\"),/*#__PURE__*/React.createElement(Option,{value:\"4Science Exp\"},\"Bac Science Exp\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"Chapitre :\"},/*#__PURE__*/React.createElement(Select,{mode:\"tags\"// style={{ width: 300 }}\n,placeholder:\"Chapitre\",onChange:handleChangeCourse},chapitres)),/*#__PURE__*/React.createElement(Form.Item,{label:\"Description :\"},/*#__PURE__*/React.createElement(TextArea,{rows:4,placeholder:\"Description\",onChange:function onChange(e){return setDescription(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Item,{label:\"Ajouter un fichier :\"},/*#__PURE__*/React.createElement(Upload,addFiles,/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(UploadOutlined,null)},\"Ajouter un fichier\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"Ajouter :\"},/*#__PURE__*/React.createElement(Button,{htmlType:\"submit\",type:\"primary\",onClick:submit},\"Ajouter\"))));};export default AddCourse;","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/addCourse.js"],"names":["UploadOutlined","Alert","Button","Form","Input","message","Select","Upload","axios","React","useState","useHistory","Option","AddCourse","create","baseURL","history","submit","e","preventDefault","pdfUrl","Set","pdf","videoUrl","video","newCourse","courseName","chapterName","description","section","classe","svgUrl","undefined","setInvalidForm","console","log","post","course","setCourse","setPdf","setVideo","push","response","data","msg","setError","error","TextArea","invalidForm","setCourseName","setChapterName","setDescription","setSection","setClasse","fileList","updateFileList","setSvgUrl","addFiles","name","multiple","action","beforeUpload","file","type","onChange","info","toLowerCase","split","join","filter","status","layout","labelCol","span","wrapperCol","handleChangeCourse","value","handleChangeClasse","handleChangeCourseName","chapitres","map","chapitre","onClose","marginTop","remember","target"],"mappings":"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","sourcesContent":["import { UploadOutlined } from \"@ant-design/icons\";\r\nimport { Alert, Button, Form, Input, message, Select, Upload } from \"antd\";\r\nimport axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../css/userDataTable.css\";\r\n\r\nconst { Option } = Select;\r\nconst AddCourse = () => {\r\n  axios.create({\r\n    baseURL: `/api/`,\r\n  });\r\n\r\n  let history = useHistory();\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    let pdfUrl = [...new Set(pdf)];\r\n    let videoUrl = [...new Set(video)];\r\n\r\n    try {\r\n      const newCourse = {\r\n        courseName,\r\n        chapterName,\r\n        description,\r\n        section,\r\n        classe,\r\n        pdfUrl,\r\n        svgUrl,\r\n        videoUrl,\r\n      };\r\n      if (description===undefined ||courseName===undefined ||chapterName===undefined ||classe===undefined ){\r\n        return setInvalidForm(true)\r\n      } \r\n\r\n      console.log(newCourse);\r\n      const course = await axios.post(\r\n        \"/api/course\",\r\n        newCourse\r\n      );\r\n      console.log(course);\r\n      setCourse(course);\r\n      setPdf([]);\r\n      setVideo([]);\r\n      history.push(\"/gestioncours\");\r\n    } catch (err) {\r\n      err.response.data.msg && setError(err.response.data.msg);\r\n      message.error(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const { TextArea } = Input;\r\n  const [data] = useState([]); //table data\r\n  const [error, setError] = useState();\r\n  const [invalidForm, setInvalidForm] = useState(false);\r\n  const [course, setCourse] = useState({});\r\n  const [courseName, setCourseName] = useState();\r\n  const [chapterName, setChapterName] = useState();\r\n  const [description, setDescription] = useState();\r\n  const [section, setSection] = useState();\r\n  const [classe, setClasse] = useState();\r\n  const [pdf, setPdf] = useState([]);\r\n  const [video, setVideo] = useState([]);\r\n  const [fileList, updateFileList] = useState([]);\r\n  const [svgUrl, setSvgUrl] = useState();\r\n\r\n  const addFiles = {\r\n    name: \"file\",\r\n    multiple: true,\r\n    action: \"/api/upload/uploadFile\",\r\n    beforeUpload: (file) => {\r\n      if (file.type !== \"application/pdf\" && file.type !== \"video/mp4\") {\r\n        return message.error(`${file.name} type de fichier non autorisé.`);\r\n      }\r\n      return file.type;\r\n    },\r\n\r\n    onChange: (info) => {\r\n      //file.status is empty when beforeUpload return false\r\n      if (info.file.type === \"application/pdf\")\r\n        setPdf((pdf) => [\r\n          ...pdf,\r\n          info.file.name.toLowerCase().split(\" \").join(\"-\"),\r\n        ]);\r\n      // setPdf(info.file.name.toLowerCase().split(\" \").join(\"-\"));\r\n      else if (info.file.type === \"video/mp4\")\r\n        setVideo((video) => [\r\n          ...video,\r\n          info.file.name.toLowerCase().split(\" \").join(\"-\"),\r\n        ]);\r\n      updateFileList(info.fileList.filter((file) => !!file.status));\r\n    },\r\n  };\r\n\r\n  const layout = {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 14 },\r\n  };\r\n\r\n  function handleChangeCourse(value) {\r\n    console.log(`selected ${value}`);\r\n    setChapterName(value[0]);\r\n  }\r\n\r\n  function handleChangeClasse(value) {\r\n    console.log(`selected ${value}`);\r\n    setClasse(value);\r\n  }\r\n\r\n  function handleChangeCourseName(value) {\r\n    console.log(`selected ${value}`);\r\n    setCourseName(value);\r\n    switch (value) {\r\n      case \"Physique\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/physique.svg\"\r\n        );\r\n        break;\r\n      case \"Chimie\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/chimie.svg\"\r\n        );\r\n        break;\r\n      case \"Base de donnée\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/bd.svg\"\r\n        );\r\n        break;\r\n      case \"algo\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/programmation.svg\"\r\n        );\r\n        break;\r\n      case \"arabe\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/arabe.svg\"\r\n        );\r\n        break;\r\n      case \"français\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/francais.svg\"\r\n        );\r\n        break;\r\n      case \"anglais\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/english.svg\"\r\n        );\r\n        break;\r\n      case \"math\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/maths.svg\"\r\n        );\r\n        break;\r\n      default:\r\n        console.log(\"no svg\");\r\n    }\r\n  }\r\n\r\n  const chapitres = [];\r\n  data.map((chapitre) => {\r\n    return chapitres.push(\r\n      <Option key={chapitre.chapterName}>{chapitre.chapterName}</Option>\r\n    );\r\n  });\r\n\r\n  const onClose = (e) => {\r\n   setInvalidForm(false)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {invalidForm &&   <Alert style={{marginTop:20}}\r\n      message=\"Formulaire invalide\"\r\n      description=\"Veuillez remplir tous les champs.\"\r\n      type=\"error\"\r\n      showIcon\r\n      closable\r\n      onClose={onClose}\r\n    />}\r\n    <Form\r\n      {...layout}\r\n      onSubmit={submit}\r\n      noValidate\r\n      labelCol={{\r\n        span: 4,\r\n      }}\r\n      wrapperCol={{\r\n        span: 25,\r\n      }}\r\n      size=\"large\"\r\n      layout=\"vertical\"\r\n      style={{ marginTop: 100 }}\r\n      initialValues={{\r\n        remember: true,\r\n      }}\r\n    >\r\n      <Form.Item label=\"Matière :\" >\r\n        <Select defaultValue=\"Matière\" onChange={handleChangeCourseName}>\r\n          <Option value=\"Physique\">Physique</Option>\r\n          <Option value=\"Chimie\">Chimie</Option>\r\n          {/* <option value=\"Base de donnée\">Base de donnée</option>\r\n          <option value=\"algo\">Algorithme</option>\r\n          <option value=\"technique\">Technique</option>\r\n          <option value=\"arabic\">Arabe</option>\r\n          <option value=\"français\">Français</option>\r\n          <option value=\"anglais\">English</option>\r\n          <option value=\"science\">Science</option>\r\n          <option value=\"mecanique\">Mecanique</option>\r\n          <option value=\"économie\">économie</option>\r\n          <option value=\"gestion\">Gestion</option>*/}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"Classe :\" >\r\n        <Select defaultValue=\"Classe\" onChange={handleChangeClasse}>\r\n          <Option value=\"1\">1 ère Secondaire</Option>\r\n          <Option value=\"2économie\">2 ème économie et serivce</Option>\r\n          <Option value=\"2Informatique\">2 ème Informatique</Option>\r\n          <Option value=\"2Science Exp\">2 ème Scientifique </Option>\r\n          <Option value=\"3Informatique\">3 ème Informatique</Option>\r\n          <Option value=\"3Mathématiques\">3 ème Mathématiques</Option>\r\n          <Option value=\"3Science Exp\">3 ème Science Exp</Option>\r\n          <Option value=\"3Techniques\">3 ème Techniques</Option>\r\n          <Option value=\"4économie\">Bac économie</Option>\r\n          <Option value=\"4Informatique\">Bac Informatique</Option>\r\n          <Option value=\"4Lettre\">Bac Lettre</Option>\r\n          <Option value=\"4mathématiques\">Bac Mathématiques</Option>\r\n          <Option value=\"4Science Exp\">Bac Science Exp</Option>\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"Chapitre :\">\r\n        <Select\r\n          mode=\"tags\"\r\n          // style={{ width: 300 }}\r\n          placeholder=\"Chapitre\"\r\n          onChange={handleChangeCourse}\r\n        >\r\n          {chapitres}\r\n        </Select>\r\n      </Form.Item>\r\n      {/*<Select\r\n        defaultValue=\"Chapitre\"\r\n        style={{ width: 300 }}\r\n        onChange={handleChangeCourse}\r\n      >\r\n        <Option value=\"Le condensateur\">Le condensateur</Option>\r\n        <Option value=\"Dipole RC\">Dipole RC</Option>\r\n        <Option value=\"La Bobine\">La Bobine</Option>\r\n        <Option value=\"Le dipole RL\">Le dipole RL</Option>\r\n        <Option value=\"Les alcools\">Les alcools</Option>\r\n        <Option value=\"Mesure d'une quantité de la matière\">\r\n          Mesure d'une quantité de la matière\r\n        </Option>\r\n      </Select>*/}\r\n      <Form.Item label=\"Description :\">\r\n        <TextArea\r\n          rows={4}\r\n          placeholder=\"Description\"\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Ajouter un fichier :\">\r\n        <Upload {...addFiles}>\r\n          <Button icon={<UploadOutlined />}>Ajouter un fichier</Button>\r\n        </Upload>\r\n      </Form.Item>\r\n\r\n      {/* <Upload {...addFiles}>\r\n        <Button style={{ marginTop: 20 }} icon={<UploadOutlined />}>\r\n          Ajouter un video\r\n    </Button>\r\n      </Upload>*/}\r\n      <Form.Item label=\"Ajouter :\"  >\r\n        <Button htmlType=\"submit\" type=\"primary\" onClick={submit}>\r\n          Ajouter\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddCourse;\r\n"]},"metadata":{},"sourceType":"module"}