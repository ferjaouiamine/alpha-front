{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Grid}from\"@material-ui/core\";import Axios from\"axios\";import React,{useEffect,useState}from\"react\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import\"./App.css\";import AddCourse from\"./Components/addCourse\";import CoursePage from\"./Components/coursePage\";import Courses from\"./Components/courses\";import CoursesByChapter from\"./Components/coursesByChapter\";import GestionCours from\"./Components/gestionCours\";import GestionEleves from\"./Components/gestionEleves\";import GestionProfs from\"./Components/gestionProfs\";import Landing from\"./Components/Landing\";import NavBar from\"./Components/Navbar\";import SignIn from\"./Components/SignIn\";import SignUp from\"./Components/SignUp\";import SignupProf from\"./Components/signupProf\";import UpdateCourse from\"./Components/updateCourse\";import UserContext from\"./context/userContext\";var App=function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];useEffect(function(){var checkLoggedIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,userRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");if(token===null){localStorage.clear();// history.push(\"/signin\");\n}/*const tokenRes = await Axios.post(\r\n          \"https://alpha-school.herokuapp.com/api/checkToken\",\r\n          null,\r\n          {\r\n            headers: { token: token },\r\n          }\r\n        );\r\n        console.log(tokenRes);\r\n        if (tokenRes.data) {*/_context.next=4;return Axios.get(\"/api/userById\",{headers:{token:token}});case 4:userRes=_context.sent;setUserData({token:token,role:userRes.data.role,user:userRes.data.user,isAuth:userRes.data.auth});case 6:case\"end\":return _context.stop();}}},_callee);}));return function checkLoggedIn(){return _ref.apply(this,arguments);};}();checkLoggedIn();},[],[userData]);return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(UserContext.Provider,{value:{userData:userData,setUserData:setUserData}},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"column\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(NavBar,null)),/*#__PURE__*/React.createElement(Grid,{item:true,container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:false,sm:2}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:8},userData.role===\"0\"?/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Landing}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signin\",component:SignIn}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signup\",component:SignUp}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signupProf\",component:SignupProf}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/courses\",component:Courses}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/gestionCours\",component:GestionCours}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/gestioneleves\",component:GestionEleves}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/gestionProfs\",component:GestionProfs}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/addCourse\",component:AddCourse}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/updateCourse\",component:UpdateCourse})):/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Landing}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signin\",component:SignIn}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signup\",component:SignUp}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signupProf\",component:SignupProf}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/courses\",component:Courses}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/coursePage/:id\",component:CoursePage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/chaptires/:id\",component:CoursesByChapter}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:false,sm:2}))))));};export default App;","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/App.js"],"names":["Grid","Axios","React","useEffect","useState","BrowserRouter","Router","Route","Switch","AddCourse","CoursePage","Courses","CoursesByChapter","GestionCours","GestionEleves","GestionProfs","Landing","NavBar","SignIn","SignUp","SignupProf","UpdateCourse","UserContext","App","userData","setUserData","checkLoggedIn","token","localStorage","getItem","clear","get","headers","userRes","role","data","user","isAuth","auth"],"mappings":"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","sourcesContent":["import { Grid } from \"@material-ui/core\";\r\nimport Axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport AddCourse from \"./Components/addCourse\";\r\nimport CoursePage from \"./Components/coursePage\";\r\nimport Courses from \"./Components/courses\";\r\nimport CoursesByChapter from \"./Components/coursesByChapter\";\r\nimport GestionCours from \"./Components/gestionCours\";\r\nimport GestionEleves from \"./Components/gestionEleves\";\r\nimport GestionProfs from \"./Components/gestionProfs\";\r\nimport Landing from \"./Components/Landing\";\r\nimport NavBar from \"./Components/Navbar\";\r\nimport SignIn from \"./Components/SignIn\";\r\nimport SignUp from \"./Components/SignUp\";\r\nimport SignupProf from \"./Components/signupProf\";\r\nimport UpdateCourse from \"./Components/updateCourse\";\r\nimport UserContext from \"./context/userContext\";\r\n\r\nconst App = () => {\r\n  const [userData, setUserData] = useState({});\r\n\r\n  useEffect(\r\n    () => {\r\n      const checkLoggedIn = async () => {\r\n        let token = localStorage.getItem(\"token\");\r\n\r\n        if (token === null) {\r\n          localStorage.clear();\r\n          // history.push(\"/signin\");\r\n        }\r\n        /*const tokenRes = await Axios.post(\r\n          \"https://alpha-school.herokuapp.com/api/checkToken\",\r\n          null,\r\n          {\r\n            headers: { token: token },\r\n          }\r\n        );\r\n        console.log(tokenRes);\r\n        if (tokenRes.data) {*/\r\n        const userRes = await Axios.get(\"/api/userById\", {\r\n          headers: { token: token },\r\n        });\r\n        setUserData({\r\n          token,\r\n          role: userRes.data.role,\r\n          user: userRes.data.user,\r\n          isAuth: userRes.data.auth,\r\n        });\r\n      };\r\n      checkLoggedIn();\r\n    },\r\n    [],\r\n    [userData]\r\n  );\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <UserContext.Provider value={{ userData, setUserData }}>\r\n        <Router>\r\n          <Grid container direction=\"column\">\r\n            <Grid item>\r\n              <NavBar />\r\n            </Grid>\r\n            <Grid item container>\r\n              <Grid item xs={false} sm={2} />\r\n              <Grid item xs={12} sm={8}>\r\n                {userData.role === \"0\" ? (\r\n                  <Switch>\r\n                    <Route exact path=\"/\" component={Landing} />\r\n                    <Route exact path=\"/signin\" component={SignIn} />\r\n                    <Route exact path=\"/signup\" component={SignUp} />\r\n                    <Route exact path=\"/signupProf\" component={SignupProf} />\r\n                    <Route exact path=\"/courses\" component={Courses} />\r\n\r\n                    <Route\r\n                      exact\r\n                      path=\"/gestionCours\"\r\n                      component={GestionCours}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/gestioneleves\"\r\n                      component={GestionEleves}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/gestionProfs\"\r\n                      component={GestionProfs}\r\n                    />\r\n                    <Route exact path=\"/addCourse\" component={AddCourse} />\r\n                    <Route\r\n                      exact\r\n                      path=\"/updateCourse\"\r\n                      component={UpdateCourse}\r\n                    />\r\n                  </Switch>\r\n                ) : (\r\n                  <Switch>\r\n                    <Route exact path=\"/\" component={Landing} />\r\n                    <Route exact path=\"/signin\" component={SignIn} />\r\n                    <Route exact path=\"/signup\" component={SignUp} />\r\n                    <Route exact path=\"/signupProf\" component={SignupProf} />\r\n                    <Route exact path=\"/courses\" component={Courses} />\r\n                    <Route\r\n                      exact\r\n                      path=\"/coursePage/:id\"\r\n                      component={CoursePage}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/chaptires/:id\"\r\n                      component={CoursesByChapter}\r\n                    />\r\n                  </Switch>\r\n                )}\r\n              </Grid>\r\n              <Grid item xs={false} sm={2}></Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Router>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}