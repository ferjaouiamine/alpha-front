{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import Grid from\"@material-ui/core/Grid\";import AddBox from\"@material-ui/icons/AddBox\";import ArrowDownward from\"@material-ui/icons/ArrowDownward\";import Check from\"@material-ui/icons/Check\";import ChevronLeft from\"@material-ui/icons/ChevronLeft\";import ChevronRight from\"@material-ui/icons/ChevronRight\";import Clear from\"@material-ui/icons/Clear\";import DeleteOutline from\"@material-ui/icons/DeleteOutline\";import Edit from\"@material-ui/icons/Edit\";import FilterList from\"@material-ui/icons/FilterList\";import FirstPage from\"@material-ui/icons/FirstPage\";import LastPage from\"@material-ui/icons/LastPage\";import Remove from\"@material-ui/icons/Remove\";import SaveAlt from\"@material-ui/icons/SaveAlt\";import Search from\"@material-ui/icons/Search\";import ViewColumn from\"@material-ui/icons/ViewColumn\";import Alert from\"@material-ui/lab/Alert\";import axios from\"axios\";import MaterialTable from\"material-table\";import React,{forwardRef,useEffect,useState}from\"react\";import\"../css/userDataTable.css\";var tableIcons={Add:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(AddBox,Object.assign({},props,{ref:ref}));}),Check:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var api=axios.create({baseURL:\"/api/\"});function GestionEleves(){var columns=[{title:\"id\",field:\"id\",hidden:true},{/*\r\n      title: \"Avatar\",\r\n      render: (rowData) => (\r\n        <Avatar\r\n          maxInitials={1}\r\n          size={40}\r\n          round={true}\r\n          name={rowData === undefined ? \" \" : rowData.firstname}\r\n        />\r\n      ),\r\n      */},{title:\"Nom\",field:\"firstname\"},{title:\"Prénom\",field:\"lastname\"},{title:\"Email\",field:\"email\"},{title:\"Classe\",field:\"classe\",lookup:{1:\"1\",2:\"2\",3:\"3\",4:\"4\"}},{title:\"Branche\",field:\"section\",lookup:{\"\":\"\",\"économie\":\"économie et serivce\",\"Science Exp\":\"Scientifique\",\"Informatique\":\"Informatique\",\"mathématiques\":\"Mathématiques\",\"Techniques\":\"Techniques\",\"Lettre\":\"Lettre\"}},{title:\"Compte\",field:\"status\",lookup:{true:\"activer\",false:\"desactiver\"}}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//table data\n//for error handling\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),iserror=_useState4[0],setIserror=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errorMessages=_useState6[0],setErrorMessages=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){var getStudents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:api.get(\"/students\").then(function(res){setData(res.data.data);setLoading(false);}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function getStudents(){return _ref.apply(this,arguments);};}();getStudents();},[],[iserror],[data]);var handleRowUpdate=function handleRowUpdate(newData,oldData,resolve){//validation\nvar errorList=[];if(errorList.length<1){api.put(\"/student/\"+oldData._id,newData).then(function(res){var dataUpdate=_toConsumableArray(data);var index=oldData.tableData.id;dataUpdate[index]=newData;setData(_toConsumableArray(dataUpdate));resolve();setIserror(false);setErrorMessages([]);}).catch(function(error){setErrorMessages([\"Update failed! Server error\"]);setIserror(true);resolve();});}else{setErrorMessages(errorList);setIserror(true);resolve();}};var handleRowDelete=function handleRowDelete(oldData,resolve){api.delete(\"/student/\"+oldData._id).then(function(res){var dataDelete=_toConsumableArray(data);var index=oldData.tableData.id;dataDelete.splice(index,1);setData(_toConsumableArray(dataDelete));resolve();}).catch(function(error){setErrorMessages([\"Delete failed! Server error\"]);setIserror(true);resolve();});};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(\"div\",null,iserror&&/*#__PURE__*/React.createElement(Alert,{severity:\"error\"},errorMessages.map(function(msg,i){return/*#__PURE__*/React.createElement(\"div\",{key:i},msg);}))),/*#__PURE__*/React.createElement(MaterialTable,{style:{marginTop:50},isLoading:loading,title:\"Liste des \\xE9l\\xE8ves\",columns:columns,data:data,icons:tableIcons,localization:{body:{emptyDataSourceMessage:\"Pas d'enregistreent à afficher\",addTooltip:\"Ajouter\",deleteTooltip:\"Supprimer\",editTooltip:\"Editer\",filterRow:{filterTooltip:\"Filtrer\"},editRow:{deleteText:\"Voulez-vous supprimer cette ligne?\",cancelTooltip:\"Annuler\",saveTooltip:\"Enregistrer\"}},grouping:{placeholder:\"Tirer l'entête ...\",groupedBy:\"Grouper par:\"},header:{actions:\"Actions\"},pagination:{labelDisplayedRows:\"{from}-{to} de {count}\",labelRowsSelect:\"lignes\",labelRowsPerPage:\"lignes par page:\",firstAriaLabel:\"Première page\",firstTooltip:\"Première page\",previousAriaLabel:\"Page précédente\",previousTooltip:\"Page précédente\",nextAriaLabel:\"Page suivante\",nextTooltip:\"Page suivante\",lastAriaLabel:\"Dernière page\",lastTooltip:\"Dernière page\"},toolbar:{addRemoveColumns:\"Ajouter ou supprimer des colonnes\",nRowsSelected:\"{0} ligne(s) sélectionée(s)\",showColumnsTitle:\"Voir les colonnes\",showColumnsAriaLabel:\"Voir les colonnes\",exportTitle:\"Exporter\",exportAriaLabel:\"Exporter\",exportName:\"Exporter en CSV\",searchTooltip:\"Chercher\",searchPlaceholder:\"Chercher\"}},editable:{onRowUpdate:function onRowUpdate(newData,oldData){return new Promise(function(resolve){handleRowUpdate(newData,oldData,resolve);});},/*onRowAdd: (newData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowAdd(newData, resolve);\r\n                }),*/onRowDelete:function onRowDelete(oldData){return new Promise(function(resolve){handleRowDelete(oldData,resolve);});}}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3})));}export default GestionEleves;","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/gestionEleves.js"],"names":["Grid","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","Alert","axios","MaterialTable","React","forwardRef","useEffect","useState","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","GestionEleves","columns","title","field","hidden","lookup","true","false","data","setData","iserror","setIserror","errorMessages","setErrorMessages","loading","setLoading","getStudents","get","then","res","catch","error","console","log","handleRowUpdate","newData","oldData","resolve","errorList","length","put","_id","dataUpdate","index","tableData","id","handleRowDelete","delete","dataDelete","splice","map","msg","i","marginTop","body","emptyDataSourceMessage","addTooltip","deleteTooltip","editTooltip","filterRow","filterTooltip","editRow","deleteText","cancelTooltip","saveTooltip","grouping","placeholder","groupedBy","header","actions","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","toolbar","addRemoveColumns","nRowsSelected","showColumnsTitle","showColumnsAriaLabel","exportTitle","exportAriaLabel","exportName","searchTooltip","searchPlaceholder","onRowUpdate","Promise","onRowDelete"],"mappings":"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","sourcesContent":["import Grid from \"@material-ui/core/Grid\";\r\nimport AddBox from \"@material-ui/icons/AddBox\";\r\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\r\nimport Check from \"@material-ui/icons/Check\";\r\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport Clear from \"@material-ui/icons/Clear\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\nimport FilterList from \"@material-ui/icons/FilterList\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport Remove from \"@material-ui/icons/Remove\";\r\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\r\nimport Search from \"@material-ui/icons/Search\";\r\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport axios from \"axios\";\r\nimport MaterialTable from \"material-table\";\r\nimport React, { forwardRef, useEffect, useState } from \"react\";\r\nimport \"../css/userDataTable.css\";\r\n\r\nconst tableIcons = {\r\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n  DetailPanel: forwardRef((props, ref) => (\r\n    <ChevronRight {...props} ref={ref} />\r\n  )),\r\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  PreviousPage: forwardRef((props, ref) => (\r\n    <ChevronLeft {...props} ref={ref} />\r\n  )),\r\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\r\n};\r\n\r\nconst api = axios.create({\r\n  baseURL: `/api/`,\r\n});\r\n\r\nfunction GestionEleves() {\r\n  var columns = [\r\n    { title: \"id\", field: \"id\", hidden: true },\r\n    {\r\n      /*\r\n      title: \"Avatar\",\r\n      render: (rowData) => (\r\n        <Avatar\r\n          maxInitials={1}\r\n          size={40}\r\n          round={true}\r\n          name={rowData === undefined ? \" \" : rowData.firstname}\r\n        />\r\n      ),\r\n      */\r\n    },\r\n\r\n    { title: \"Nom\", field: \"firstname\" },\r\n    { title: \"Prénom\", field: \"lastname\" },\r\n    { title: \"Email\", field: \"email\" },\r\n    { title: \"Classe\", field: \"classe\" , lookup:  { 1: \"1\", 2: \"2\",3: \"3\",4: \"4\" }},\r\n    { title: \"Branche\", field: \"section\" ,lookup:  {\"\": \"\", \"économie\": \"économie et serivce\"\r\n    ,\"Science Exp\": \"Scientifique\",\r\n    \"Informatique\": \"Informatique\" ,\r\n    \"mathématiques\":\"Mathématiques\"  ,\r\n    \"Techniques\":\"Techniques\",\r\n    \"Lettre\":\"Lettre\"\r\n    }},\r\n\r\n    {\r\n      title: \"Compte\",\r\n      field: \"status\",\r\n      lookup: { true: \"activer\", false: \"desactiver\" },\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n  ];\r\n  const [data, setData] = useState([]); //table data\r\n\r\n  //for error handling\r\n  const [iserror, setIserror] = useState(false);\r\n  const [errorMessages, setErrorMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(\r\n    () => {\r\n      const getStudents = async () => {\r\n        api\r\n          .get(\"/students\")\r\n          .then((res) => {\r\n            setData(res.data.data);\r\n            setLoading(false);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      };\r\n      getStudents();\r\n    },\r\n    [],\r\n    [iserror],\r\n    [data]\r\n  );\r\n\r\n  const handleRowUpdate = (newData, oldData, resolve) => {\r\n    //validation\r\n    let errorList = [];\r\n\r\n    if (errorList.length < 1) {\r\n      api\r\n        .put(\"/student/\" + oldData._id, newData)\r\n        .then((res) => {\r\n          const dataUpdate = [...data];\r\n          const index = oldData.tableData.id;\r\n          dataUpdate[index] = newData;\r\n          setData([...dataUpdate]);\r\n          resolve();\r\n          setIserror(false);\r\n          setErrorMessages([]);\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessages([\"Update failed! Server error\"]);\r\n          setIserror(true);\r\n          resolve();\r\n        });\r\n    } else {\r\n      setErrorMessages(errorList);\r\n      setIserror(true);\r\n      resolve();\r\n    }\r\n  };\r\n\r\n   \r\n  const handleRowDelete = (oldData, resolve) => {\r\n    api\r\n      .delete(\"/student/\" + oldData._id)\r\n      .then((res) => {\r\n        const dataDelete = [...data];\r\n        const index = oldData.tableData.id;\r\n        dataDelete.splice(index, 1);\r\n        setData([...dataDelete]);\r\n        resolve();\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessages([\"Delete failed! Server error\"]);\r\n        setIserror(true);\r\n        resolve();\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={3}></Grid>\r\n        <Grid item xs={12}>\r\n          <div>\r\n            {iserror && (\r\n              <Alert severity=\"error\">\r\n                {errorMessages.map((msg, i) => {\r\n                  return <div key={i}>{msg}</div>;\r\n                })}\r\n              </Alert>\r\n            )}\r\n          </div>\r\n          <MaterialTable\r\n            style={{ marginTop: 50 }}\r\n            isLoading={loading}\r\n            title=\"Liste des élèves\"\r\n            columns={columns}\r\n            data={data}\r\n            icons={tableIcons}\r\n            localization={{\r\n              body: {\r\n                emptyDataSourceMessage: \"Pas d'enregistreent à afficher\",\r\n                addTooltip: \"Ajouter\",\r\n                deleteTooltip: \"Supprimer\",\r\n                editTooltip: \"Editer\",\r\n                filterRow: {\r\n                  filterTooltip: \"Filtrer\",\r\n                },\r\n                editRow: {\r\n                  deleteText: \"Voulez-vous supprimer cette ligne?\",\r\n                  cancelTooltip: \"Annuler\",\r\n                  saveTooltip: \"Enregistrer\",\r\n                },\r\n              },\r\n              grouping: {\r\n                placeholder: \"Tirer l'entête ...\",\r\n                groupedBy: \"Grouper par:\",\r\n              },\r\n              header: {\r\n                actions: \"Actions\",\r\n              },\r\n              pagination: {\r\n                labelDisplayedRows: \"{from}-{to} de {count}\",\r\n                labelRowsSelect: \"lignes\",\r\n                labelRowsPerPage: \"lignes par page:\",\r\n                firstAriaLabel: \"Première page\",\r\n                firstTooltip: \"Première page\",\r\n                previousAriaLabel: \"Page précédente\",\r\n                previousTooltip: \"Page précédente\",\r\n                nextAriaLabel: \"Page suivante\",\r\n                nextTooltip: \"Page suivante\",\r\n                lastAriaLabel: \"Dernière page\",\r\n                lastTooltip: \"Dernière page\",\r\n              },\r\n              toolbar: {\r\n                addRemoveColumns: \"Ajouter ou supprimer des colonnes\",\r\n                nRowsSelected: \"{0} ligne(s) sélectionée(s)\",\r\n                showColumnsTitle: \"Voir les colonnes\",\r\n                showColumnsAriaLabel: \"Voir les colonnes\",\r\n                exportTitle: \"Exporter\",\r\n                exportAriaLabel: \"Exporter\",\r\n                exportName: \"Exporter en CSV\",\r\n                searchTooltip: \"Chercher\",\r\n                searchPlaceholder: \"Chercher\",\r\n              },\r\n            }}\r\n            editable={{\r\n              onRowUpdate: (newData, oldData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowUpdate(newData, oldData, resolve);\r\n                }),\r\n              /*onRowAdd: (newData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowAdd(newData, resolve);\r\n                }),*/\r\n              onRowDelete: (oldData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowDelete(oldData, resolve);\r\n                }),\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={3}></Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionEleves;\r\n"]},"metadata":{},"sourceType":"module"}