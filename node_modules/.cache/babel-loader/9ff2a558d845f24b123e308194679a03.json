{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\src\\\\Components\\\\addCourse.js\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { Alert, Button, Form, Input, message, Select, Upload } from \"antd\";\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"../css/userDataTable.css\";\nconst {\n  Option\n} = Select;\n\nconst AddCourse = () => {\n  axios.create({\n    baseURL: `http://localhost:3001/api/`\n  });\n  let history = useHistory();\n\n  const submit = async e => {\n    e.preventDefault();\n    let pdfUrl = [...new Set(pdf)];\n    let videoUrl = [...new Set(video)];\n\n    try {\n      const newCourse = {\n        courseName,\n        chapterName,\n        description,\n        section,\n        classe,\n        pdfUrl,\n        svgUrl,\n        videoUrl\n      };\n\n      if (description === undefined || courseName === undefined || chapterName === undefined || classe === undefined) {\n        return setInvalidForm(true);\n      }\n\n      console.log(newCourse);\n      const course = await axios.post(\"/api/course\", newCourse);\n      console.log(course);\n      setCourse(course);\n      setPdf([]);\n      setVideo([]);\n      history.push(\"/gestioncours\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n      message.error(err.response.data.msg);\n    }\n  };\n\n  const {\n    TextArea\n  } = Input;\n  const [data] = useState([]); //table data\n\n  const [error, setError] = useState();\n  const [invalidForm, setInvalidForm] = useState(false);\n  const [course, setCourse] = useState({});\n  const [courseName, setCourseName] = useState();\n  const [chapterName, setChapterName] = useState();\n  const [description, setDescription] = useState();\n  const [section, setSection] = useState();\n  const [classe, setClasse] = useState();\n  const [pdf, setPdf] = useState([]);\n  const [video, setVideo] = useState([]);\n  const [fileList, updateFileList] = useState([]);\n  const [svgUrl, setSvgUrl] = useState();\n  const addFiles = {\n    name: \"file\",\n    multiple: true,\n    action: \"/api/upload/uploadFile\",\n    beforeUpload: file => {\n      if (file.type !== \"application/pdf\" && file.type !== \"video/mp4\") {\n        return message.error(`${file.name} type de fichier non autorisé.`);\n      }\n\n      return file.type;\n    },\n    onChange: info => {\n      //file.status is empty when beforeUpload return false\n      if (info.file.type === \"application/pdf\") setPdf(pdf => [...pdf, info.file.name.toLowerCase().split(\" \").join(\"-\")]); // setPdf(info.file.name.toLowerCase().split(\" \").join(\"-\"));\n      else if (info.file.type === \"video/mp4\") setVideo(video => [...video, info.file.name.toLowerCase().split(\" \").join(\"-\")]);\n      updateFileList(info.fileList.filter(file => !!file.status));\n    }\n  };\n  const layout = {\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 14\n    }\n  };\n\n  function handleChangeCourse(value) {\n    console.log(`selected ${value}`);\n    setChapterName(value[0]);\n  }\n\n  function handleChangeClasse(value) {\n    console.log(`selected ${value}`);\n    setClasse(value);\n  }\n\n  function handleChangeCourseName(value) {\n    console.log(`selected ${value}`);\n    setCourseName(value);\n\n    switch (value) {\n      case \"Physique\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/physique.svg\");\n        break;\n\n      case \"Chimie\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/chimie.svg\");\n        break;\n\n      case \"Base de donnée\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/bd.svg\");\n        break;\n\n      case \"algo\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/programmation.svg\");\n        break;\n\n      case \"arabe\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/arabe.svg\");\n        break;\n\n      case \"français\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/francais.svg\");\n        break;\n\n      case \"anglais\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/english.svg\");\n        break;\n\n      case \"math\":\n        setSvgUrl(\"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/maths.svg\");\n        break;\n\n      default:\n        console.log(\"no svg\");\n    }\n  }\n\n  const chapitres = [];\n  data.map(chapitre => {\n    return chapitres.push( /*#__PURE__*/React.createElement(Option, {\n      key: chapitre.chapterName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, chapitre.chapterName));\n  });\n\n  const onClose = e => {\n    setInvalidForm(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, invalidForm && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      marginTop: 20\n    },\n    message: \"Formulaire invalide\",\n    description: \"Veuillez remplir tous les champs.\",\n    type: \"error\",\n    showIcon: true,\n    closable: true,\n    onClose: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Form, Object.assign({}, layout, {\n    onSubmit: submit,\n    noValidate: true,\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 25\n    },\n    size: \"large\",\n    layout: \"vertical\",\n    style: {\n      marginTop: 100\n    },\n    initialValues: {\n      remember: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Mati\\xE8re :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    defaultValue: \"Mati\\xE8re\",\n    onChange: handleChangeCourseName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"Physique\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }, \"Physique\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"Chimie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, \"Chimie\"))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Classe :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    defaultValue: \"Classe\",\n    onChange: handleChangeClasse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  }, \"1 \\xE8re Secondaire\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"2\\xE9conomie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, \"2 \\xE8me \\xE9conomie et serivce\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"2Informatique\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, \"2 \\xE8me Informatique\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"2Science Exp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, \"2 \\xE8me Scientifique \"), /*#__PURE__*/React.createElement(Option, {\n    value: \"3Informatique\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, \"3 \\xE8me Informatique\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"3Math\\xE9matiques\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, \"3 \\xE8me Math\\xE9matiques\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"3Science Exp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  }, \"3 \\xE8me Science Exp\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"3Techniques\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, \"3 \\xE8me Techniques\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"4\\xE9conomie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, \"Bac \\xE9conomie\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"4Informatique\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, \"Bac Informatique\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"4Lettre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, \"Bac Lettre\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"4math\\xE9matiques\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Bac Math\\xE9matiques\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"4Science Exp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, \"Bac Science Exp\"))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Chapitre :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    mode: \"tags\" // style={{ width: 300 }}\n    ,\n    placeholder: \"Chapitre\",\n    onChange: handleChangeCourse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, chapitres)), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Description :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    rows: 4,\n    placeholder: \"Description\",\n    onChange: e => setDescription(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Ajouter un fichier :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Upload, Object.assign({}, addFiles, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(UploadOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }, \"Ajouter un fichier\"))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Ajouter :\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    htmlType: \"submit\",\n    type: \"primary\",\n    onClick: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, \"Ajouter\"))));\n};\n\nexport default AddCourse;","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/addCourse.js"],"names":["UploadOutlined","Alert","Button","Form","Input","message","Select","Upload","axios","React","useState","useHistory","Option","AddCourse","create","baseURL","history","submit","e","preventDefault","pdfUrl","Set","pdf","videoUrl","video","newCourse","courseName","chapterName","description","section","classe","svgUrl","undefined","setInvalidForm","console","log","course","post","setCourse","setPdf","setVideo","push","err","response","data","msg","setError","error","TextArea","invalidForm","setCourseName","setChapterName","setDescription","setSection","setClasse","fileList","updateFileList","setSvgUrl","addFiles","name","multiple","action","beforeUpload","file","type","onChange","info","toLowerCase","split","join","filter","status","layout","labelCol","span","wrapperCol","handleChangeCourse","value","handleChangeClasse","handleChangeCourseName","chapitres","map","chapitre","onClose","marginTop","remember","target"],"mappings":"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","sourcesContent":["import { UploadOutlined } from \"@ant-design/icons\";\r\nimport { Alert, Button, Form, Input, message, Select, Upload } from \"antd\";\r\nimport axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../css/userDataTable.css\";\r\n\r\nconst { Option } = Select;\r\nconst AddCourse = () => {\r\n  axios.create({\r\n    baseURL: `http://localhost:3001/api/`,\r\n  });\r\n\r\n  let history = useHistory();\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    let pdfUrl = [...new Set(pdf)];\r\n    let videoUrl = [...new Set(video)];\r\n\r\n    try {\r\n      const newCourse = {\r\n        courseName,\r\n        chapterName,\r\n        description,\r\n        section,\r\n        classe,\r\n        pdfUrl,\r\n        svgUrl,\r\n        videoUrl,\r\n      };\r\n      if (description===undefined ||courseName===undefined ||chapterName===undefined ||classe===undefined ){\r\n        return setInvalidForm(true)\r\n      } \r\n\r\n      console.log(newCourse);\r\n      const course = await axios.post(\r\n        \"/api/course\",\r\n        newCourse\r\n      );\r\n      console.log(course);\r\n      setCourse(course);\r\n      setPdf([]);\r\n      setVideo([]);\r\n      history.push(\"/gestioncours\");\r\n    } catch (err) {\r\n      err.response.data.msg && setError(err.response.data.msg);\r\n      message.error(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const { TextArea } = Input;\r\n  const [data] = useState([]); //table data\r\n  const [error, setError] = useState();\r\n  const [invalidForm, setInvalidForm] = useState(false);\r\n  const [course, setCourse] = useState({});\r\n  const [courseName, setCourseName] = useState();\r\n  const [chapterName, setChapterName] = useState();\r\n  const [description, setDescription] = useState();\r\n  const [section, setSection] = useState();\r\n  const [classe, setClasse] = useState();\r\n  const [pdf, setPdf] = useState([]);\r\n  const [video, setVideo] = useState([]);\r\n  const [fileList, updateFileList] = useState([]);\r\n  const [svgUrl, setSvgUrl] = useState();\r\n\r\n  const addFiles = {\r\n    name: \"file\",\r\n    multiple: true,\r\n    action: \"/api/upload/uploadFile\",\r\n    beforeUpload: (file) => {\r\n      if (file.type !== \"application/pdf\" && file.type !== \"video/mp4\") {\r\n        return message.error(`${file.name} type de fichier non autorisé.`);\r\n      }\r\n      return file.type;\r\n    },\r\n\r\n    onChange: (info) => {\r\n      //file.status is empty when beforeUpload return false\r\n      if (info.file.type === \"application/pdf\")\r\n        setPdf((pdf) => [\r\n          ...pdf,\r\n          info.file.name.toLowerCase().split(\" \").join(\"-\"),\r\n        ]);\r\n      // setPdf(info.file.name.toLowerCase().split(\" \").join(\"-\"));\r\n      else if (info.file.type === \"video/mp4\")\r\n        setVideo((video) => [\r\n          ...video,\r\n          info.file.name.toLowerCase().split(\" \").join(\"-\"),\r\n        ]);\r\n      updateFileList(info.fileList.filter((file) => !!file.status));\r\n    },\r\n  };\r\n\r\n  const layout = {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 14 },\r\n  };\r\n\r\n  function handleChangeCourse(value) {\r\n    console.log(`selected ${value}`);\r\n    setChapterName(value[0]);\r\n  }\r\n\r\n  function handleChangeClasse(value) {\r\n    console.log(`selected ${value}`);\r\n    setClasse(value);\r\n  }\r\n\r\n  function handleChangeCourseName(value) {\r\n    console.log(`selected ${value}`);\r\n    setCourseName(value);\r\n    switch (value) {\r\n      case \"Physique\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/physique.svg\"\r\n        );\r\n        break;\r\n      case \"Chimie\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/chimie.svg\"\r\n        );\r\n        break;\r\n      case \"Base de donnée\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/bd.svg\"\r\n        );\r\n        break;\r\n      case \"algo\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/programmation.svg\"\r\n        );\r\n        break;\r\n      case \"arabe\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/arabe.svg\"\r\n        );\r\n        break;\r\n      case \"français\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/francais.svg\"\r\n        );\r\n        break;\r\n      case \"anglais\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/english.svg\"\r\n        );\r\n        break;\r\n      case \"math\":\r\n        setSvgUrl(\r\n          \"https://ta-storage.s3.amazonaws.com/prod/subjects_icons/maths.svg\"\r\n        );\r\n        break;\r\n      default:\r\n        console.log(\"no svg\");\r\n    }\r\n  }\r\n\r\n  const chapitres = [];\r\n  data.map((chapitre) => {\r\n    return chapitres.push(\r\n      <Option key={chapitre.chapterName}>{chapitre.chapterName}</Option>\r\n    );\r\n  });\r\n\r\n  const onClose = (e) => {\r\n   setInvalidForm(false)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {invalidForm &&   <Alert style={{marginTop:20}}\r\n      message=\"Formulaire invalide\"\r\n      description=\"Veuillez remplir tous les champs.\"\r\n      type=\"error\"\r\n      showIcon\r\n      closable\r\n      onClose={onClose}\r\n    />}\r\n    <Form\r\n      {...layout}\r\n      onSubmit={submit}\r\n      noValidate\r\n      labelCol={{\r\n        span: 4,\r\n      }}\r\n      wrapperCol={{\r\n        span: 25,\r\n      }}\r\n      size=\"large\"\r\n      layout=\"vertical\"\r\n      style={{ marginTop: 100 }}\r\n      initialValues={{\r\n        remember: true,\r\n      }}\r\n    >\r\n      <Form.Item label=\"Matière :\" >\r\n        <Select defaultValue=\"Matière\" onChange={handleChangeCourseName}>\r\n          <Option value=\"Physique\">Physique</Option>\r\n          <Option value=\"Chimie\">Chimie</Option>\r\n          {/* <option value=\"Base de donnée\">Base de donnée</option>\r\n          <option value=\"algo\">Algorithme</option>\r\n          <option value=\"technique\">Technique</option>\r\n          <option value=\"arabic\">Arabe</option>\r\n          <option value=\"français\">Français</option>\r\n          <option value=\"anglais\">English</option>\r\n          <option value=\"science\">Science</option>\r\n          <option value=\"mecanique\">Mecanique</option>\r\n          <option value=\"économie\">économie</option>\r\n          <option value=\"gestion\">Gestion</option>*/}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"Classe :\" >\r\n        <Select defaultValue=\"Classe\" onChange={handleChangeClasse}>\r\n          <Option value=\"1\">1 ère Secondaire</Option>\r\n          <Option value=\"2économie\">2 ème économie et serivce</Option>\r\n          <Option value=\"2Informatique\">2 ème Informatique</Option>\r\n          <Option value=\"2Science Exp\">2 ème Scientifique </Option>\r\n          <Option value=\"3Informatique\">3 ème Informatique</Option>\r\n          <Option value=\"3Mathématiques\">3 ème Mathématiques</Option>\r\n          <Option value=\"3Science Exp\">3 ème Science Exp</Option>\r\n          <Option value=\"3Techniques\">3 ème Techniques</Option>\r\n          <Option value=\"4économie\">Bac économie</Option>\r\n          <Option value=\"4Informatique\">Bac Informatique</Option>\r\n          <Option value=\"4Lettre\">Bac Lettre</Option>\r\n          <Option value=\"4mathématiques\">Bac Mathématiques</Option>\r\n          <Option value=\"4Science Exp\">Bac Science Exp</Option>\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"Chapitre :\">\r\n        <Select\r\n          mode=\"tags\"\r\n          // style={{ width: 300 }}\r\n          placeholder=\"Chapitre\"\r\n          onChange={handleChangeCourse}\r\n        >\r\n          {chapitres}\r\n        </Select>\r\n      </Form.Item>\r\n      {/*<Select\r\n        defaultValue=\"Chapitre\"\r\n        style={{ width: 300 }}\r\n        onChange={handleChangeCourse}\r\n      >\r\n        <Option value=\"Le condensateur\">Le condensateur</Option>\r\n        <Option value=\"Dipole RC\">Dipole RC</Option>\r\n        <Option value=\"La Bobine\">La Bobine</Option>\r\n        <Option value=\"Le dipole RL\">Le dipole RL</Option>\r\n        <Option value=\"Les alcools\">Les alcools</Option>\r\n        <Option value=\"Mesure d'une quantité de la matière\">\r\n          Mesure d'une quantité de la matière\r\n        </Option>\r\n      </Select>*/}\r\n      <Form.Item label=\"Description :\">\r\n        <TextArea\r\n          rows={4}\r\n          placeholder=\"Description\"\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Ajouter un fichier :\">\r\n        <Upload {...addFiles}>\r\n          <Button icon={<UploadOutlined />}>Ajouter un fichier</Button>\r\n        </Upload>\r\n      </Form.Item>\r\n\r\n      {/* <Upload {...addFiles}>\r\n        <Button style={{ marginTop: 20 }} icon={<UploadOutlined />}>\r\n          Ajouter un video\r\n    </Button>\r\n      </Upload>*/}\r\n      <Form.Item label=\"Ajouter :\"  >\r\n        <Button htmlType=\"submit\" type=\"primary\" onClick={submit}>\r\n          Ajouter\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddCourse;\r\n"]},"metadata":{},"sourceType":"module"}