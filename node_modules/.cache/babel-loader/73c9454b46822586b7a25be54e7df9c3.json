{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP I5\\\\alpha-front\\\\src\\\\Components\\\\gestionProfs.js\";\nimport Grid from \"@material-ui/core/Grid\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport axios from \"axios\";\nimport MaterialTable from \"material-table\";\nimport React, { forwardRef, useEffect, useState } from \"react\";\nimport \"../css/userDataTable.css\";\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 35\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 37\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 38\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 36\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 42\n    }\n  })))\n};\nconst api = axios.create({\n  baseURL: `http://localhost:3001/api/`\n});\n\nfunction GestionEleves() {\n  var columns = [{\n    title: \"id\",\n    field: \"id\",\n    hidden: true\n  }, {\n    /*\r\n    title: \"Avatar\",\r\n    render: (rowData) => (\r\n      <Avatar\r\n        maxInitials={1}\r\n        size={40}\r\n        round={true}\r\n        name={rowData === undefined ? \" \" : rowData.firstname}\r\n      />\r\n    ),\r\n    */\n  }, {\n    title: \"Nom\",\n    field: \"firstname\"\n  }, {\n    title: \"Prénom\",\n    field: \"lastname\"\n  }, {\n    title: \"Email\",\n    field: \"email\"\n  }, {\n    title: \"matiere\",\n    field: \"matiere\"\n  }, {\n    title: \"N° tel\",\n    field: \"phone\"\n  },\n  /*{ title: \"Compte\", field: \"status\" },\r\n  { title: \"Admin\", field: \"admin\" },*/\n  {\n    title: \"Admin\",\n    field: \"admin\",\n    lookup: {\n      true: \"activer\",\n      false: \"desactiver\"\n    }\n  }, {\n    title: \"Compte\",\n    field: \"status\",\n    lookup: {\n      true: \"activer\",\n      false: \"desactiver\"\n    }\n  }\n  /*{\r\n    title: \"Admin\",\r\n    render: (rowData) => <Switch onChange={handleStatusUpdate} />,\r\n  },*/\n  ];\n  const [data, setData] = useState([]); //table data\n  //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const getStudents = async () => {\n      api.get(\"/profs\").then(res => {\n        setData(res.data.data);\n        setLoading(false);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    getStudents();\n  }, [], [iserror], [data]);\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (errorList.length < 1) {\n      api.put(\"/prof/\" + oldData._id, newData).then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n      }).catch(error => {\n        setErrorMessages([\"Update failed! Server error\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete(\"/prof/\" + oldData._id).then(res => {\n      const dataDelete = [...data];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setData([...dataDelete]);\n      resolve();\n    }).catch(error => {\n      setErrorMessages([\"Delete failed! Server error\"]);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, iserror && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, errorMessages.map((msg, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 26\n      }\n    }, msg);\n  }))), /*#__PURE__*/React.createElement(MaterialTable, {\n    style: {\n      marginTop: 50\n    },\n    title: \"Liste des profs\",\n    isLoading: loading,\n    columns: columns,\n    data: data,\n    icons: tableIcons,\n    localization: {\n      body: {\n        emptyDataSourceMessage: \"Pas d'enregistreent à afficher\",\n        addTooltip: \"Ajouter\",\n        deleteTooltip: \"Supprimer\",\n        editTooltip: \"Editer\",\n        filterRow: {\n          filterTooltip: \"Filtrer\"\n        },\n        editRow: {\n          deleteText: \"Voulez-vous supprimer cette ligne?\",\n          cancelTooltip: \"Annuler\",\n          saveTooltip: \"Enregistrer\"\n        }\n      },\n      grouping: {\n        placeholder: \"Tirer l'entête ...\",\n        groupedBy: \"Grouper par:\"\n      },\n      header: {\n        actions: \"Actions\"\n      },\n      pagination: {\n        labelDisplayedRows: \"{from}-{to} de {count}\",\n        labelRowsSelect: \"lignes\",\n        labelRowsPerPage: \"lignes par page:\",\n        firstAriaLabel: \"Première page\",\n        firstTooltip: \"Première page\",\n        previousAriaLabel: \"Page précédente\",\n        previousTooltip: \"Page précédente\",\n        nextAriaLabel: \"Page suivante\",\n        nextTooltip: \"Page suivante\",\n        lastAriaLabel: \"Dernière page\",\n        lastTooltip: \"Dernière page\"\n      },\n      toolbar: {\n        addRemoveColumns: \"Ajouter ou supprimer des colonnes\",\n        nRowsSelected: \"{0} ligne(s) sélectionée(s)\",\n        showColumnsTitle: \"Voir les colonnes\",\n        showColumnsAriaLabel: \"Voir les colonnes\",\n        exportTitle: \"Exporter\",\n        exportAriaLabel: \"Exporter\",\n        exportName: \"Exporter en CSV\",\n        searchTooltip: \"Chercher\",\n        searchPlaceholder: \"Chercher\"\n      }\n    },\n    editable: {\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        handleRowUpdate(newData, oldData, resolve);\n      }),\n\n      /*onRowAdd: (newData) =>\r\n        new Promise((resolve) => {\r\n          handleRowAdd(newData, resolve);\r\n        }),*/\n      onRowDelete: oldData => new Promise(resolve => {\n        handleRowDelete(oldData, resolve);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default GestionEleves;","map":{"version":3,"sources":["C:/Users/HP I5/alpha-front/src/Components/gestionProfs.js"],"names":["Grid","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","Alert","axios","MaterialTable","React","forwardRef","useEffect","useState","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","GestionEleves","columns","title","field","hidden","lookup","true","false","data","setData","iserror","setIserror","errorMessages","setErrorMessages","loading","setLoading","getStudents","get","then","res","catch","error","console","log","handleRowUpdate","newData","oldData","resolve","errorList","length","put","_id","dataUpdate","index","tableData","id","handleRowDelete","delete","dataDelete","splice","map","msg","i","marginTop","body","emptyDataSourceMessage","addTooltip","deleteTooltip","editTooltip","filterRow","filterTooltip","editRow","deleteText","cancelTooltip","saveTooltip","grouping","placeholder","groupedBy","header","actions","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","toolbar","addRemoveColumns","nRowsSelected","showColumnsTitle","showColumnsAriaLabel","exportTitle","exportAriaLabel","exportName","searchTooltip","searchPlaceholder","onRowUpdate","Promise","onRowDelete"],"mappings":"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","sourcesContent":["import Grid from \"@material-ui/core/Grid\";\r\nimport AddBox from \"@material-ui/icons/AddBox\";\r\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\r\nimport Check from \"@material-ui/icons/Check\";\r\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport Clear from \"@material-ui/icons/Clear\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\nimport FilterList from \"@material-ui/icons/FilterList\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport Remove from \"@material-ui/icons/Remove\";\r\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\r\nimport Search from \"@material-ui/icons/Search\";\r\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport axios from \"axios\";\r\nimport MaterialTable from \"material-table\";\r\nimport React, { forwardRef, useEffect, useState } from \"react\";\r\nimport \"../css/userDataTable.css\";\r\n\r\nconst tableIcons = {\r\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n  DetailPanel: forwardRef((props, ref) => (\r\n    <ChevronRight {...props} ref={ref} />\r\n  )),\r\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  PreviousPage: forwardRef((props, ref) => (\r\n    <ChevronLeft {...props} ref={ref} />\r\n  )),\r\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\r\n};\r\n\r\nconst api = axios.create({\r\n  baseURL: `http://localhost:3001/api/`,\r\n});\r\n\r\nfunction GestionEleves() {\r\n  var columns = [\r\n    { title: \"id\", field: \"id\", hidden: true },\r\n    {\r\n      /*\r\n      title: \"Avatar\",\r\n      render: (rowData) => (\r\n        <Avatar\r\n          maxInitials={1}\r\n          size={40}\r\n          round={true}\r\n          name={rowData === undefined ? \" \" : rowData.firstname}\r\n        />\r\n      ),\r\n      */\r\n    },\r\n    { title: \"Nom\", field: \"firstname\" },\r\n    { title: \"Prénom\", field: \"lastname\" },\r\n    { title: \"Email\", field: \"email\" },\r\n    { title: \"matiere\", field: \"matiere\" },\r\n    { title: \"N° tel\", field: \"phone\" },\r\n    /*{ title: \"Compte\", field: \"status\" },\r\n    { title: \"Admin\", field: \"admin\" },*/\r\n    {\r\n      title: \"Admin\",\r\n      field: \"admin\",\r\n      lookup: { true: \"activer\", false: \"desactiver\" },\r\n    },\r\n    {\r\n      title: \"Compte\",\r\n      field: \"status\",\r\n      lookup: { true: \"activer\", false: \"desactiver\" },\r\n    },\r\n    /*{\r\n      title: \"Admin\",\r\n      render: (rowData) => <Switch onChange={handleStatusUpdate} />,\r\n    },*/\r\n  ];\r\n  const [data, setData] = useState([]); //table data\r\n\r\n  //for error handling\r\n  const [iserror, setIserror] = useState(false);\r\n  const [errorMessages, setErrorMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(\r\n    () => {\r\n      const getStudents = async () => {\r\n        api\r\n          .get(\"/profs\")\r\n          .then((res) => {\r\n            setData(res.data.data);\r\n            setLoading(false);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      };\r\n      getStudents();\r\n    },\r\n    [],\r\n    [iserror],\r\n    [data]\r\n  );\r\n\r\n  const handleRowUpdate = (newData, oldData, resolve) => {\r\n    //validation\r\n    let errorList = [];\r\n\r\n    if (errorList.length < 1) {\r\n      api\r\n        .put(\"/prof/\" + oldData._id, newData)\r\n        .then((res) => {\r\n          const dataUpdate = [...data];\r\n          const index = oldData.tableData.id;\r\n          dataUpdate[index] = newData;\r\n          setData([...dataUpdate]);\r\n          resolve();\r\n          setIserror(false);\r\n          setErrorMessages([]);\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessages([\"Update failed! Server error\"]);\r\n          setIserror(true);\r\n          resolve();\r\n        });\r\n    } else {\r\n      setErrorMessages(errorList);\r\n      setIserror(true);\r\n      resolve();\r\n    }\r\n  };\r\n\r\n  const handleRowDelete = (oldData, resolve) => {\r\n    api\r\n      .delete(\"/prof/\" + oldData._id)\r\n      .then((res) => {\r\n        const dataDelete = [...data];\r\n        const index = oldData.tableData.id;\r\n        dataDelete.splice(index, 1);\r\n        setData([...dataDelete]);\r\n        resolve();\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessages([\"Delete failed! Server error\"]);\r\n        setIserror(true);\r\n        resolve();\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={3}></Grid>\r\n        <Grid item xs={12}>\r\n          <div>\r\n            {iserror && (\r\n              <Alert severity=\"error\">\r\n                {errorMessages.map((msg, i) => {\r\n                  return <div key={i}>{msg}</div>;\r\n                })}\r\n              </Alert>\r\n            )}\r\n          </div>\r\n          <MaterialTable\r\n            style={{ marginTop: 50 }}\r\n            title=\"Liste des profs\"\r\n            isLoading={loading}\r\n            columns={columns}\r\n            data={data}\r\n            icons={tableIcons}\r\n            localization={{\r\n              body: {\r\n                emptyDataSourceMessage: \"Pas d'enregistreent à afficher\",\r\n                addTooltip: \"Ajouter\",\r\n                deleteTooltip: \"Supprimer\",\r\n                editTooltip: \"Editer\",\r\n                filterRow: {\r\n                  filterTooltip: \"Filtrer\",\r\n                },\r\n                editRow: {\r\n                  deleteText: \"Voulez-vous supprimer cette ligne?\",\r\n                  cancelTooltip: \"Annuler\",\r\n                  saveTooltip: \"Enregistrer\",\r\n                },\r\n              },\r\n              grouping: {\r\n                placeholder: \"Tirer l'entête ...\",\r\n                groupedBy: \"Grouper par:\",\r\n              },\r\n              header: {\r\n                actions: \"Actions\",\r\n              },\r\n              pagination: {\r\n                labelDisplayedRows: \"{from}-{to} de {count}\",\r\n                labelRowsSelect: \"lignes\",\r\n                labelRowsPerPage: \"lignes par page:\",\r\n                firstAriaLabel: \"Première page\",\r\n                firstTooltip: \"Première page\",\r\n                previousAriaLabel: \"Page précédente\",\r\n                previousTooltip: \"Page précédente\",\r\n                nextAriaLabel: \"Page suivante\",\r\n                nextTooltip: \"Page suivante\",\r\n                lastAriaLabel: \"Dernière page\",\r\n                lastTooltip: \"Dernière page\",\r\n              },\r\n              toolbar: {\r\n                addRemoveColumns: \"Ajouter ou supprimer des colonnes\",\r\n                nRowsSelected: \"{0} ligne(s) sélectionée(s)\",\r\n                showColumnsTitle: \"Voir les colonnes\",\r\n                showColumnsAriaLabel: \"Voir les colonnes\",\r\n                exportTitle: \"Exporter\",\r\n                exportAriaLabel: \"Exporter\",\r\n                exportName: \"Exporter en CSV\",\r\n                searchTooltip: \"Chercher\",\r\n                searchPlaceholder: \"Chercher\",\r\n              },\r\n            }}\r\n            editable={{\r\n              onRowUpdate: (newData, oldData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowUpdate(newData, oldData, resolve);\r\n                }),\r\n              /*onRowAdd: (newData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowAdd(newData, resolve);\r\n                }),*/\r\n              onRowDelete: (oldData) =>\r\n                new Promise((resolve) => {\r\n                  handleRowDelete(oldData, resolve);\r\n                }),\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={3}></Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionEleves;\r\n"]},"metadata":{},"sourceType":"module"}